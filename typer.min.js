function typer(e,t){function n(){m.dataNum=Math.floor(999999999*Math.random()+1),e.setAttribute("data-typer",m.dataNum)}function i(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e)}function r(e,t,n,i){function r(e){for(var t in e)o[t]=e[t]}var o={};return o.html=!0,"string"==typeof t||t instanceof Array?o[e]=t:(t.length&&(t=t[0]),o[e]=t.innerHTML),n&&"number"==typeof n?(o.speed=n,i&&r(i)):n&&(r(n),i&&(o.speed=i)),o}function o(){return m.item>=0||(m.item=0),m.item===m.length?document.body.removeEventListener("killTyper",m.kill):(m.ks||(m.ks=!0,document.body.addEventListener("killTyper",m.kill)),m.cursor||(m.cursor="cursor-soft"),void(m.type=setInterval(function(){var e=m[m.item];e.line?s(e):e["continue"]?l(e):e.pause?c(e):e.emit?u(e):e.listen?d(e):e.back?p(e):e.empty?h():e.run?v(e):e.end&&f(e)},0)))}function a(e){var n;n=e.line?e.line:e["continue"];var i=[m.newDiv],r=0;m.iterator=setInterval(function(){if(r===n.length)return clearInterval(m.iterator),m.item++,o();var t=n[r];if(e.html){if("<"===t&&"/"!==n[r+1]){for(var a="",s="",l=r;l<n.length&&(a+=n[l],">"!==n[l]&&"<"!==n[l]&&(s+=n[l]),">"!==n[l]);l++);var c=m.voids.some(function(e){return e===s});if(c)i[0].innerHTML+=a;else{var u=document.createElement("div");u.innerHTML=a;var d=i[0];i.unshift(u.firstChild),d.appendChild(u.firstChild)}return r+=a.length}if("<"===t&&"/"===n[r+1])return i.shift(),r=n.indexOf(">",r)+1;if("&"===t){for(var p="",l=r;l<n.length&&(p+=n[l],";"!==n[l]);l++);var u=document.createElement("div");u.innerHTML=p,1===u.textContent.length?(i[0].innerHTML+=p,r=l):i[0].innerHTML+=t}else i[0].innerHTML+=t}else{if("string"!=typeof n){var u=document.createElement("div");u.textContent=t,t=u.innerHTML}m.newDiv.innerHTML+=t}r++},e.speed||t)}function s(t){if(clearInterval(m.type),m.newDiv){m.newDiv.className="";var n=m.newDiv.getAttribute("data-class");n&&(m.newDiv.className=n),m.newDiv.classList.add("white-space"),""===m.newDiv.innerHTML&&(m.newDiv.innerHTML=" ")}var i=document.createElement("div");return i.setAttribute("data-typer-child",m.dataNum),i.className=m.cursor,i.classList.add("typer","white-space"),t["class"]&&(i.className+=" "+t["class"],i.setAttribute("data-class",t["class"])),e.appendChild(i),m.newDiv=i,1===t.line?(m.item++,o()):void a(t)}function l(e){clearInterval(m.type),a(e)}function c(e){clearInterval(m.type),m.pause=setTimeout(function(){m.item++,o()},e.pause)}function u(e){clearInterval(m.type),e.el.dispatchEvent(new CustomEvent(e.emit)),m.item++,o()}function d(e){clearInterval(m.type),e.el.addEventListener(e.listen,function t(n){e.el.removeEventListener(n.type,t),m.killed||(m.item++,o())})}function p(e){function n(e){var t=[].slice.call(e.children);t.map(function(t,i){t.innerHTML.length?t.children.length&&(n(t),this[i].innerHTML.length||(this[i].remove?this[i].remove():this[i].removeNode(),a=e.innerHTML.split(""),s=a.length-1)):(t.remove?t.remove():t.removeNode(),e===m.newDiv&&(a=e.innerHTML.split(""),s=a.length-1))},t)}if(clearInterval(m.type),!m.newDiv.textContent)return m.item++,o();if(e.speed=e.speed||1,"empty"===e.back)return m.newDiv.innerHTML="",m.item++,o();if(e.back>m.newDiv.innerHTML.length&&(e.back="all"),"all"===e.back&&(e.back=m.newDiv.textContent.length),e.back<0){var i=m.newDiv.textContent;e.back=i.substring(-1*e.back,i.length).length}var r=0,a=m.newDiv.innerHTML.split(""),s=a.length-1;m.goBack=setInterval(function(){if(r++,">"===a[s])for(var t=[],i=s;i>=0;i--){if(t.unshift(a[i]),"<"===a[i]&&"/"===a[i+1]){if(t.length=0,">"===a[i-1])continue;s=i-1;break}if("<"===a[i]){var l=t.slice(1,t.length-1).join(""),c=m.voids.some(function(e){return e===l});if(s=i-1,c&&a.splice(i,t.length),t.length=0,">"===a[i-1])continue;break}}if(";"===a[s]){for(var u=[],d=s;d>=0&&(u.unshift(a[d]),"&"!==a[d]);d--);var p=document.createElement("div");p.innerHTML=u.join(""),1===p.textContent.length?(s=d-1,a.splice(d,u.length)):(a.splice(s,1),s--),m.newDiv.innerHTML=a.join("")}else a.splice(s,1),m.newDiv.innerHTML=a.join(""),s--;r===e.back&&(clearInterval(m.goBack),n(m.newDiv),m.item++,o())},e.speed||t)}function h(){m.newDiv="",e.innerHTML="",s({line:1})}function v(t){clearInterval(m.type),t.run(e),m.item++,o()}function f(){clearInterval(m.type),m.cb()}var m=[];if(m.voids=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],t=t||70,e.length&&(e=e[0]),!e.nodeType||1!==e.nodeType)throw"typer error: invalid element provided.";if(document.styleSheets.length||i(),!Element.prototype.hasOwnProperty("classList")){var y=function(e){return this.el=e,"".split.call(e.className," "),e.className.split(" ").map(function(e){this.push(e)},this),this};y.prototype=[],y.prototype.add=function(){return[].map.call(arguments,function(e){-1===this.indexOf(e)&&this.push(e)},this),this.el.className=this.join(" "),this},y.prototype.remove=function(){return[].map.call(arguments,function(e){var t=this.indexOf(e);t>=0?this.splice(t,1):!1},this),this.el.className=this.join(" "),this},y.prototype.toggle=function(){[].map.call(arguments,function(e){var t=this.indexOf(e);t>=0?this.splice(t,1):this.push(e)},this),this.el.className=this.join(" ")},Object.defineProperty(Element.prototype,"classList",{get:function(){return new y(this)}})}!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),n();var g={cursor:function(e){if(m.cursorRan)return console.log('You can only call ".cursor" once.'),this;if(m.cursorRan=!0,void 0===e&&(e=!0),e===!1)return m.cursor="no-cursor",this;var t=[],n='[data-typer="'+m.dataNum+'"]';return e.color&&document.styleSheets[0].addRule(n+" .typer:after","background-color:"+e.color+";"),"hard"===e.blink?t.push("cursor-hard"):t.push("cursor-soft"),e.block===!0&&t.push("cursor-block"),m.cursor=t.join(" "),this},line:function(e,t,n){return e?m.push(r("line",e,t,n)):m.push({line:1}),m.typing||(m.typing=!0,o()),this},"continue":function(e,t,n){return e?(m.push(r("continue",e,t,n)),this):this},pause:function(e){return m.push({pause:e||500}),this},emit:function(e,t){if(t||(t=document.body),t.length&&(t=t[0]),!t.nodeType||1!==t.nodeType)throw".emit() error: invalid element provided.";return m.push({emit:e,el:t}),this},listen:function(e,t){if(t||(t=document.body),t.length&&(t=t[0]),!t.nodeType||1!==t.nodeType)throw".listen() error: invalid element provided.";return m.push({listen:e,el:t}),this},back:function(e,t){return m.push({back:e,speed:t}),this},empty:function(){return m.push({empty:!0}),this},run:function(e){return m.push({run:e}),this},end:function(t,n){function i(){return console.log('WARNING: you tried to call a method after ".end" has already been called.'),r}m.push({end:!0}),m.cb=function(){m.newDiv.className="white-space";var i=m.newDiv.getAttribute("data-class");i&&(m.newDiv.className+=" "+i),m.newDiv="",t&&t instanceof Function&&t(e),(t&&"boolean"==typeof t||n)&&(n instanceof Function&&n(e),document.body.dispatchEvent(new CustomEvent("typerFinished")))};var r={cursor:function(){return i()},line:function(){return i()},"continue":function(){return i()},pause:function(){return i()},emit:function(){return i()},listen:function(){return i()},back:function(){return i()},empty:function(){return i()},run:function(){return i()},end:function(){return i()}};return r}};return m.kill=function(e){if(document.body.removeEventListener(e.type,m.kill),m.killed=!0,clearInterval(m.iterator),clearInterval(m.goBack),clearTimeout(m.pause),m.item===m.length)return console.log("This typer has completed; removing listener.");var t=m[m.item];t&&t.listen&&t.el.dispatchEvent(new CustomEvent(t.listen)),console.log("Typer killed!")},g}