function typer(e,n){function t(){y.dataNum=Math.floor(999999999*Math.random()+1),e.setAttribute("data-typer",y.dataNum)}function i(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e)}function r(e,n){var t=document.styleSheets[0];"insertRule"in t?t.insertRule(e+"{"+n+"}",1):t.addRule(e,n)}function o(e,n,t,i){function r(e){for(var n in e)o[n]=e[n]}var o={};return o.html=!0,"string"==typeof n||n instanceof Array?o[e]=n:(n.length&&(n=n[0]),o[e]=n.innerHTML),t&&"number"==typeof t?(o.speed=t,i&&r(i)):t&&(r(t),i&&(o.speed=i)),o}function l(){return y.item>=0||(y.item=0),y.item===y.length?document.body.removeEventListener("killTyper",y.kill):(y.ks||(y.ks=!0,document.body.addEventListener("killTyper",y.kill)),y.cursor||(y.cursor="cursor-soft"),void(y.type=setInterval(function(){var e=y[y.item];e.line?c(e):e["continue"]?a(e):e.pause?s(e):e.emit?d(e):e.listen?v(e):e.back?p(e):e.empty?f():e.run?h(e):e.end&&m(e)},0)))}function u(e){var t;t=e.line?e.line:e["continue"];var i=[y.newDiv],r=0;y.iterator=setInterval(function(){if(r===t.length)return clearInterval(y.iterator),y.item++,l();var n=t[r];if(e.html){if("<"===n&&"/"!==t[r+1]){for(var o="",u="",c=r;c<t.length&&(o+=t[c],">"!==t[c]&&"<"!==t[c]&&(u+=t[c]),">"!==t[c]);c++);var a=y.voids.some(function(e){return e===u});if(a)i[0].innerHTML+=o;else{var s=document.createElement("div");s.innerHTML=o;var d=i[0];i.unshift(s.firstChild),d.appendChild(s.firstChild)}return r+=o.length}if("<"===n&&"/"===t[r+1])return i.shift(),r=t.indexOf(">",r)+1;if("&"===n){for(var v="",c=r;c<t.length&&(v+=t[c],";"!==t[c]);c++);var s=document.createElement("div");s.innerHTML=v,1===s.textContent.length?(i[0].innerHTML+=v,r=c):i[0].innerHTML+=n}else i[0].innerHTML+=n}else{if("string"!=typeof t){var s=document.createElement("div");s.textContent=n,n=s.innerHTML}y.newDiv.innerHTML+=n}r++},e.speed||n)}function c(n){clearInterval(y.type),y.newDiv&&(y.newDiv.className="white-space",""===y.newDiv.innerHTML&&(y.newDiv.innerHTML=" "));var t=document.createElement("div");return t.setAttribute("data-typer-child",y.dataNum),t.className=y.cursor,t.classList.add("typer"),t.classList.add("white-space"),e.appendChild(t),y.newDiv=t,1===n.line?(y.item++,l()):void u(n)}function a(e){clearInterval(y.type),u(e)}function s(e){clearInterval(y.type),y.pause=setTimeout(function(){y.item++,l()},e.pause)}function d(e){clearInterval(y.type),e.el.dispatchEvent(new CustomEvent(e.emit)),y.item++,l()}function v(e){clearInterval(y.type),e.el.addEventListener(e.listen,function n(t){e.el.removeEventListener(t.type,n),y.killed||(y.item++,l())})}function p(e){function t(e){var n=[].slice.call(e.children);n.map(function(n,i){n.innerHTML.length?n.children.length&&(t(n),this[i].innerHTML.length||(this[i].remove?this[i].remove():this[i].removeNode(),o=e.innerHTML.split(""),u=o.length-1)):(n.remove?n.remove():n.removeNode(),e===y.newDiv&&(o=e.innerHTML.split(""),u=o.length-1))},n)}if(clearInterval(y.type),!y.newDiv.textContent)return y.item++,l();if(e.speed=e.speed||1,"empty"===e.back)return y.newDiv.innerHTML="",y.item++,l();if(e.back>y.newDiv.innerHTML.length&&(e.back="all"),"all"===e.back&&(e.back=y.newDiv.textContent.length),e.back<0){var i=y.newDiv.textContent;e.back=i.substring(-1*e.back,i.length).length}var r=0,o=y.newDiv.innerHTML.split(""),u=o.length-1;y.goBack=setInterval(function(){if(r++,">"===o[u])for(var n=[],i=u;i>=0;i--){if(n.unshift(o[i]),"<"===o[i]&&"/"===o[i+1]){if(n.length=0,">"===o[i-1])continue;u=i-1;break}if("<"===o[i]){var c=n.slice(1,n.length-1).join(""),a=y.voids.some(function(e){return e===c});if(u=i-1,a&&o.splice(i,n.length),n.length=0,">"===o[i-1])continue;break}}if(";"===o[u]){for(var s=[],d=u;d>=0&&(s.unshift(o[d]),"&"!==o[d]);d--);var v=document.createElement("div");v.innerHTML=s.join(""),1===v.textContent.length?(u=d-1,o.splice(d,s.length)):(o.splice(u,1),u--),y.newDiv.innerHTML=o.join("")}else o.splice(u,1),y.newDiv.innerHTML=o.join(""),u--;r===e.back&&(clearInterval(y.goBack),t(y.newDiv),y.item++,l())},e.speed||n)}function f(){y.newDiv="",e.innerHTML="",c({line:1})}function h(n){clearInterval(y.type),n.run(e),y.item++,l()}function m(){clearInterval(y.type),y.cb()}var y=[];if(y.voids=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],n=n||70,e.length&&(e=e[0]),!e.nodeType||1!==e.nodeType)throw"typer error: invalid element provided.";document.styleSheets.length||i(),function(){function e(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),t}e.prototype=window.Event.prototype,window.CustomEvent=e}(),t();var b={cursor:function(e){if(y.cursorRan)return console.log('You can only call ".cursor" once.'),this;if(y.cursorRan=!0,void 0===e&&(e=!0),e===!1)return y.cursor="no-cursor",this;var n=[],t='[data-typer="'+y.dataNum+'"]';return e.color&&r(t+" .typer::after","background-color:"+e.color),"hard"===e.blink?n.push("cursor-hard"):n.push("cursor-soft"),e.block===!0&&n.push("cursor-block"),y.cursor=n.join(" "),this},line:function(e,n,t){return e?y.push(o("line",e,n,t)):y.push({line:1}),y.typing||(y.typing=!0,l()),this},"continue":function(e,n,t){return e?(y.push(o("continue",e,n,t)),this):this},pause:function(e){return y.push({pause:e||500}),this},emit:function(e,n){if(n||(n=document.body),n.length&&(n=n[0]),!n.nodeType||1!==n.nodeType)throw".emit() error: invalid element provided.";return y.push({emit:e,el:n}),this},listen:function(e,n){if(n||(n=document.body),n.length&&(n=n[0]),!n.nodeType||1!==n.nodeType)throw".listen() error: invalid element provided.";return y.push({listen:e,el:n}),this},back:function(e,n){return y.push({back:e,speed:n}),this},empty:function(){return y.push({empty:!0}),this},run:function(e){return y.push({run:e}),this},end:function(n,t){function i(){return console.log('WARNING: you tried to call a method after ".end" has already been called.'),r}y.push({end:!0}),y.cb=function(){y.newDiv.className="white-space",y.newDiv="",n&&n instanceof Function&&n(e),(n&&"boolean"==typeof n||t)&&(t instanceof Function&&t(e),document.body.dispatchEvent(new CustomEvent("typerFinished")))};var r={cursor:function(){return i()},line:function(){return i()},"continue":function(){return i()},pause:function(){return i()},emit:function(){return i()},listen:function(){return i()},back:function(){return i()},empty:function(){return i()},run:function(){return i()},end:function(){return i()}};return r}};return y.kill=function(e){if(document.body.removeEventListener(e.type,y.kill),y.killed=!0,clearInterval(y.iterator),clearInterval(y.goBack),clearTimeout(y.pause),y.item===y.length)return console.log("This typer has completed; removing listener.");var n=y[y.item];n&&n.listen&&n.el.dispatchEvent(new CustomEvent(n.listen)),console.log("Typer killed!")},b}