!function(e,n){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(function(){return n()}):e.typer=n()}(this,function(){"use strict";function e(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function t(t,r){function i(e){return{}.toString.call(e).slice(8,-1)}function o(e){var n=i(e);if("HTML"!==n.slice(0,4)&&"String"!==n)throw"You need to provide a string selector, such as '.some-class', or an html element.";return n}function c(e){var n=i(e);if(void 0===e)return L.speedSet?r:70;if("Number"===n&&!isNaN(e))return e;if("Object"===n){var t=e.hasOwnProperty("min"),o=e.hasOwnProperty("max"),c=e.hasOwnProperty("speed");if(c&&!isNaN(e.speed))return e.speed;if(t&&o&&e.min<e.max)return e;if(!Object.keys(e).length&&L.speedSet)return r;if(!t&&!o&&!c)return r}throw Error("You have provided an invalid value for speed.")}function u(){["typer","cursor-block","cursor-soft","cursor-hard","no-cursor"].forEach(function(e){L.newDiv.classList.remove(e)})}function a(e,n){return Math.floor(Math.random()*(n-e+1)+e)}function s(e,n){L.style=document.createElement("style"),L.style.appendChild(document.createTextNode("")),document.head.appendChild(L.style);var t=document.styleSheets[document.styleSheets.length-1];"insertRule"in t?t.insertRule(e+"{"+n+"}",0):t.addRule(e,n)}function l(e,t,r){function o(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments[1],a=r.container,s=!o&&("String"===i(a)?document.querySelector(a).textContent:a.textContent);return t={},n(t,e,o||s),n(t,"speed",c(r)),n(t,"html",!1!==r.html),n(t,"element",u?r.element:null),t}var u="line"===e,a="continue"===e;if(t||r)if("Object"===i(t))(u||a&&t.container)&&L.push(o(t));else if(isNaN(r))L.push(o(r,t));else{var s;L.push((s={},n(s,e,t),n(s,"speed",c(r)),n(s,"html",!0),s))}else u&&L.push({line:1})}function d(){if(L.item>=0||(L.item=0),L.item===L.length)return k.removeEventListener("killTyper",L.kill);L.ks||(L.ks=!0,k.addEventListener("killTyper",L.kill)),L.cursor||(L.cursor="cursor-soft"),L.type=setInterval(function(){var e=L[L.item];e.line?f(e):e.continue?v(e):e.pause?m(e):e.emit?y(e):e.listen?N(e):e.back?w(e):e.empty?g():e.run?b(e):e.end&&E()},0)}function f(e){clearInterval(L.type),L.newDiv&&(u(),L.newDiv.classList.add("white-space"),L.newDiv.innerHTML||(L.newDiv.innerHTML=" "));var n=document.createElement(e.element||"div");if(n.setAttribute("data-typer-child",L.dataNum),n.className=L.cursor,n.classList.add("typer"),n.classList.add("white-space"),t.appendChild(n),L.newDiv=n,1===e.line)return L.item++,d();p(e)}function v(e){clearInterval(L.type),p(e)}function h(e,n,t){var r="Object"===i(e)?a(e.min,e.max):e;L.iterator=setTimeout(function(){return n(t)},r)}function p(n){function t(n,r){var i=[];n=[].concat(e(n));for(var o=0;o<n.length;o++){var c=n[o],u=c.nodeName;"#text"===u?i.push({parent:r,content:c.textContent}):c.childNodes.length?function(){var n=document.createElement(u);[].concat(e(c.attributes)).forEach(function(e){n.setAttribute(e.name,e.value)}),i.push({parent:r,newNode:n}),i=i.concat(t(c.childNodes,n))}():L.voids.includes(u)&&i.push({parent:r,voidNode:c})}return i}function r(){return clearInterval(L.iterator),L.item++,d()}var o=n.line||n.continue,c=document.createElement("div");if(Array.isArray(o))return function(e){function t(){var u=o[i++];c.textContent=u,L.newDiv.innerHTML+=e?u:c.innerHTML,i===o.length?r():h(n.speed,t)}var i=0;h(n.speed,t)}(n.html);c.innerHTML=o,n.html?function(){function e(){if(!a)return r();a.content?(a.parent.innerHTML+=a.content[u++],u===a.content.length&&(u=0,a=i[o++])):(a.parent.appendChild(a.voidNode||a.newNode),a=i[o++]),h(n.speed,e)}var i=t(c.childNodes,L.newDiv),o=0,u=0,a=i[o++];h(n.speed,e)}():function(){function e(){if(t===o.length)return r();var u=o[t];"String"!==i(o)&&(c.textContent=u,u=c.innerHTML),L.newDiv.innerHTML+=u,t++,h(n.speed,e)}var t=0;h(n.speed,e)}()}function m(e){clearInterval(L.type),L.pause=setTimeout(function(){L.item++,d()},e.pause)}function y(e){clearInterval(L.type),document.querySelector(e.el).dispatchEvent(new Event(e.emit)),L.item++,d()}function N(e){clearInterval(L.type);var n=document.querySelector(e.el);n.addEventListener(e.listen,function e(t){n.removeEventListener(t.type,e),L.killed||(L.item++,d())})}function w(n){function t(e){var n=0,t=i(e||L.newDiv).reverse();return function(){var r=t[0];L.voids.includes(r.nodeName)?(r.remove(),t.shift()):(r.textContent=r.textContent.slice(0,-1),r.length||t.shift()),e||++n===u&&(clearInterval(L.goBack),o(L.newDiv),L.item++,d())}}function i(n){var t=[],r=[].concat(e(n.childNodes));return r.length?(r.forEach(function(e){e.childNodes.length?t=t.concat(i(e)):t.push(e)}),t):t}function o(n){[].concat(e(n.childNodes)).forEach(function(e){L.voids.includes(e.nodeName)||(e.childNodes.length&&o(e),"#text"===e.nodeName||e.innerHTML.length||e.remove(),"#text"!==e.nodeName||e.length||e.remove())})}function c(n){var t=0;return[].concat(e(n.childNodes)).forEach(function(e){L.voids.includes(e.nodeName)&&t++,e.childNodes.length&&(t+=c(e))}),t}var u=n.back,a=n.speed;if(clearInterval(L.type),!L.newDiv||!L.newDiv.textContent)return L.item++,d();var s=c(L.newDiv),l=L.newDiv.textContent.length;if("empty"===u){if(!a||a>=l)L.newDiv.innerHTML="";else{var f=L.newDiv.cloneNode(!0),v=t(f);a<0&&(a+=l);for(var h=0;h<a;h++)v();o(f),L.newDiv.innerHTML=f.innerHTML}return L.item++,d()}u>l+s&&(u="all"),"all"===u&&(u=l+s),u<0&&(u=l+s- -1*u),L.goBack=setInterval(t(),a||r)}function g(){t.innerHTML="",f({line:1})}function b(e){var n=e.run;clearInterval(L.type),n(t),L.item++,d()}function E(){clearInterval(L.type),L.cb()}var L=[],k=document.body;"String"===o(t)&&(t=document.querySelector(t)),r=c(r),L.speedSet=!0,L.voids=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"],L.classNames=["typer","cursor-block","cursor-soft","cursor-hard","no-cursor"],L.dataNum=Date.now(),t.setAttribute("data-typer",L.dataNum);var T={cursor:function(e){if(L.cursorRan)return console.warn('You can only call ".cursor" once.'),this;if(L.cursorRan=!0,void 0===e&&(e=!0),!1===e)return L.cursor="no-cursor",this;var n=e,t=n.color,r=n.blink,i=n.block,o=[],c='[data-typer="'+L.dataNum+'"]';return t&&s(c+" .typer::after","background-color:"+t),o.push("cursor-"+("hard"===r?"hard":"soft")),!0===i&&o.push("cursor-block"),L.cursor=o.join(" "),this},line:function(e,n){return l("line",e,n),L.typing||(L.typing=!0,d()),this},continue:function(e,n){return l("continue",e,n),this},pause:function(e){return L.push({pause:e||500}),this},emit:function(e,n){return n||(n=k),"String"===o(n)&&(n=document.querySelector(n)),L.push({emit:e,el:n}),this},listen:function(e,n){return n||(n=k),"String"===o(n)&&(n=document.querySelector(n)),L.push({listen:e,el:n}),this},back:function(e,n){return L.push({back:e,speed:n}),this},empty:function(){return L.push({empty:!0}),this},run:function(e){return L.push({run:e}),this},end:function(e,n){function r(){return console.warn('WARNING: you tried to call a method after ".end" has already been called.'),o}L.push({end:!0}),L.cb=function(){L.style&&L.style.remove(),u(),L.newDiv.classList.add("white-space"),L.newDiv="",e&&e instanceof Function&&e(t),(e&&"Boolean"===i(e)||n)&&(n instanceof Function&&n(t),k.dispatchEvent(new Event("typerFinished")))};var o={cursor:r,line:r,continue:r,pause:r,emit:r,listen:r,back:r,empty:r,run:r,end:r};return o}};return L.kill=function(e){if(k.removeEventListener(e.type,L.kill),L.killed=!0,clearInterval(L.iterator),clearInterval(L.goBack),clearTimeout(L.pause),L.item===L.length)return console.log("This typer has completed. Listeners removed.");var n=L[L.item];n&&n.listen&&document.querySelector(n.el).dispatchEvent(new Event(n.listen))},T}return t});